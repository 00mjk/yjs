!function n(t,r,e){function u(o,a){if(!r[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(n){var r=t[o][1][n];return u(r?r:n)},l,l.exports,n,t,r,e)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<e.length;o++)u(e[o]);return u}({1:[function(n,t){var r;r=n("underscore"),t.exports=function(n){var t;return t=function(){function t(t,r,e){var u,i;this.engine=t,this.HB=r,this.execution_listener=e,i=function(n){return function(t){return n.send(t)}}(this),this.execution_listener.push(i),this.applied_operations=[],u=function(n){return function(t){return n.applied_operations.push(t)}}(this),this.execution_listener.push(u),0!==(null!=n?n.length:void 0)&&this.engine.applyOps(n[0].getHistoryBuffer()._encode()),this.HB.setManualGarbageCollect(),this.unexecuted={}}return t.prototype.getOpsInExecutionOrder=function(){return this.applied_operations},t.prototype.send=function(t){var r,e,u,i;if(t.uid.creator===this.HB.getUserId()&&"string"!=typeof t.uid.op_number){for(i=[],e=0,u=n.length;u>e;e++)r=n[e],i.push(r.getUserId()!==this.HB.getUserId()?r.getConnector().receive(t):void 0);return i}},t.prototype.receive=function(n){var t,r;return null==(t=this.unexecuted)[r=n.uid.creator]&&(t[r]=[]),this.unexecuted[n.uid.creator].push(n)},t.prototype.flushOne=function(n){var t;return(null!=(t=this.unexecuted[n])?t.length:void 0)>0?this.engine.applyOp(this.unexecuted[n].shift()):void 0},t.prototype.flushOneRandom=function(){return this.flushOne(r.random(0,n.length-1))},t.prototype.flushAll=function(){var n,t,r;r=this.unexecuted;for(n in r)t=r[n],this.engine.applyOps(t);return this.unexecuted={}},t}()}},{underscore:2}],2:[function(n,t,r){(function(){var n=this,e=n._,u={},i=Array.prototype,o=Object.prototype,a=Function.prototype,c=i.push,l=i.slice,f=i.concat,s=o.toString,p=o.hasOwnProperty,h=i.forEach,v=i.map,d=i.reduce,g=i.reduceRight,y=i.filter,m=i.every,x=i.some,_=i.indexOf,b=i.lastIndexOf,w=Array.isArray,j=Object.keys,O=a.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};"undefined"!=typeof r?("undefined"!=typeof t&&t.exports&&(r=t.exports=A),r._=A):n._=A,A.VERSION="1.6.0";var k=A.each=A.forEach=function(n,t,r){if(null==n)return n;if(h&&n.forEach===h)n.forEach(t,r);else if(n.length===+n.length){for(var e=0,i=n.length;i>e;e++)if(t.call(r,n[e],e,n)===u)return}else for(var o=A.keys(n),e=0,i=o.length;i>e;e++)if(t.call(r,n[o[e]],o[e],n)===u)return;return n};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:v&&n.map===v?n.map(t,r):(k(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var E="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),d&&n.reduce===d)return e&&(t=A.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(k(n,function(n,i,o){u?r=t.call(e,r,n,i,o):(r=n,u=!0)}),!u)throw new TypeError(E);return r},A.reduceRight=A.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),g&&n.reduceRight===g)return e&&(t=A.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var o=A.keys(n);i=o.length}if(k(n,function(a,c,l){c=o?o[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(E);return r},A.find=A.detect=function(n,t,r){var e;return F(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:y&&n.filter===y?n.filter(t,r):(k(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var e=!0;return null==n?e:m&&n.every===m?n.every(t,r):(k(n,function(n,i,o){return(e=e&&t.call(r,n,i,o))?void 0:u}),!!e)};var F=A.some=A.any=function(n,t,r){t||(t=A.identity);var e=!1;return null==n?e:x&&n.some===x?n.some(t,r):(k(n,function(n,i,o){return e||(e=t.call(r,n,i,o))?u:void 0}),!!e)};A.contains=A.include=function(n,t){return null==n?!1:_&&n.indexOf===_?-1!=n.indexOf(t):F(n,function(n){return n===t})},A.invoke=function(n,t){var r=l.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,A.property(t))},A.where=function(n,t){return A.filter(n,A.matches(t))},A.findWhere=function(n,t){return A.find(n,A.matches(t))},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-1/0,u=-1/0;return k(n,function(n,i,o){var a=t?t.call(r,n,i,o):n;a>u&&(e=n,u=a)}),e},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return k(n,function(n,i,o){var a=t?t.call(r,n,i,o):n;u>a&&(e=n,u=a)}),e},A.shuffle=function(n){var t,r=0,e=[];return k(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=A.values(n)),n[A.random(n.length-1)]):A.shuffle(n).slice(0,Math.max(0,t))};var I=function(n){return null==n?A.identity:A.isFunction(n)?n:A.property(n)};A.sortBy=function(n,t,r){return t=I(t),A.pluck(A.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var M=function(n){return function(t,r,e){var u={};return r=I(r),k(t,function(i,o){var a=r.call(e,i,o,t);n(u,a,i)}),u}};A.groupBy=M(function(n,t,r){A.has(n,t)?n[t].push(r):n[t]=[r]}),A.indexBy=M(function(n,t,r){n[t]=r}),A.countBy=M(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){r=I(r);for(var u=r.call(e,t),i=0,o=n.length;o>i;){var a=i+o>>>1;r.call(e,n[a])<u?i=a+1:o=a}return i},A.toArray=function(n){return n?A.isArray(n)?l.call(n):n.length===+n.length?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:n.length===+n.length?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:l.call(n,0,t)},A.initial=function(n,t,r){return l.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:l.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var R=function(n,t,r){return t&&A.every(n,A.isArray)?f.apply(r,n):(k(n,function(n){A.isArray(n)||A.isArguments(n)?t?c.apply(r,n):R(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return R(n,t,[])},A.without=function(n){return A.difference(n,l.call(arguments,1))},A.partition=function(n,t){var r=[],e=[];return k(n,function(n){(t(n)?r:e).push(n)}),[r,e]},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var u=r?A.map(n,r,e):n,i=[],o=[];return k(u,function(r,e){(t?e&&o[o.length-1]===r:A.contains(o,r))||(o.push(r),i.push(n[e]))}),i},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=l.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.contains(t,n)})})},A.difference=function(n){var t=f.apply(i,l.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(_&&n.indexOf===_)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var B=function(){};A.bind=function(n,t){var r,e;if(O&&n.bind===O)return O.apply(n,l.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=l.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(l.call(arguments)));B.prototype=n.prototype;var u=new B;B.prototype=null;var i=n.apply(u,r.concat(l.call(arguments)));return Object(i)===i?i:u}},A.partial=function(n){var t=l.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===A&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},A.bindAll=function(n){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return k(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(l.call(arguments,1)))},A.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:A.now(),o=null,i=n.apply(e,u),e=u=null};return function(){var l=A.now();a||r.leading!==!1||(a=l);var f=t-(l-a);return e=this,u=arguments,0>=f?(clearTimeout(o),o=null,a=l,i=n.apply(e,u),e=u=null):o||r.trailing===!1||(o=setTimeout(c,f)),i}},A.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var l=A.now()-o;t>l?e=setTimeout(c,t-l):(e=null,r||(a=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,o=A.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(a=n.apply(i,u),i=u=null),a}},A.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},A.wrap=function(n,t){return A.partial(t,n)},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=function(n){if(!A.isObject(n))return[];if(j)return j(n);var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return k(l.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=f.apply(i,l.call(arguments,1));return k(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=f.apply(i,l.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return k(l.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var q=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var u=s.call(n);if(u!=s.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var o=n.constructor,a=t.constructor;if(o!==a&&!(A.isFunction(o)&&o instanceof o&&A.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=q(n[c],t[c],r,e)););}else{for(var f in n)if(A.has(n,f)&&(c++,!(l=A.has(t,f)&&q(n[f],t[f],r,e))))break;if(l){for(f in t)if(A.has(t,f)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return q(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=w||function(n){return"[object Array]"==s.call(n)},A.isObject=function(n){return n===Object(n)},k(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return s.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==s.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return p.call(n,t)},A.noConflict=function(){return n._=e,this},A.identity=function(n){return n},A.constant=function(n){return function(){return n}},A.property=function(n){return function(t){return t[n]}},A.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},A.now=Date.now||function(){return(new Date).getTime()};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};S.unescape=A.invert(S.escape);var T={escape:new RegExp("["+A.keys(S.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(S.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return S[n][t]})}}),A.result=function(n,t){if(null==n)return void 0;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){k(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),U.call(this,r.apply(A,n))}})};var N=0;A.uniqueId=function(n){var t=++N+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var u=new RegExp([(r.escape||C).source,(r.interpolate||C).source,(r.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";n.replace(u,function(t,r,e,u,a){return o+=n.slice(i,a).replace(D,function(n){return"\\"+H[n]}),r&&(o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(o+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(o+="';\n"+u+"\n__p+='"),i=a+t.length,t}),o+="';\n",r.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{e=new Function(r.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+o+"}",c},A.chain=function(n){return A(n).chain()};var U=function(n){return this._chain?A(n).chain():n};A.mixin(A),k(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],U.call(this,r)}}),k(["concat","join","slice"],function(n){var t=i[n];A.prototype[n]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}).call(this)},{}]},{},[1]);