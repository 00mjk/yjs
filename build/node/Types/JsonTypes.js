(function(){var t,e={}.hasOwnProperty,r=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};t=require("./TextTypes"),module.exports=function(e){var o,n,u,i,a;return i=t(e),a=i.types,u=i.parser,n=function(t){var e;return new(e=function(){function t(e){var r,u,i,l;l=e.map,i=function(r,u){return Object.defineProperty(t.prototype,r,{get:function(){var t;return t=u.val(),t instanceof o?n(t):t instanceof a.ImmutableObject?t.val():t},set:function(t){var o,n,u,i;if(u=e.val(r),t.constructor==={}.constructor&&u instanceof a.Operation){i=[];for(o in t)n=t[o],i.push(u.val(o,n,"immutable"));return i}return e.val(r,t,"immutable")},enumerable:!0,configurable:!1})};for(r in l)u=l[r],i(r,u)}return t}())(t)},o=function(t){function o(t,e,r){var n,u;if(o.__super__.constructor.call(this,t),null!=e){if("object"!=typeof e)throw new Error("The initial value of JsonTypes must be of type Object! (current type: "+typeof e+")");for(n in e)u=e[n],this.val(n,u,r)}}return r(o,t),o.prototype.toJson=function(){var t,e,r,o;o=this.val(),t={};for(e in o)if(r=o[e],r.constructor==={}.constructor)t[e]=this.val(e).toJson();else if(r instanceof a.Operation){for(;r instanceof a.Operation;)r=r.val();t[e]=r}else t[e]=r;return t},o.prototype.mutable_default=!0,o.prototype.setMutableDefault=function(t){if(t===!0||"mutable"===t)o.prototype.mutable_default=!0;else{if(t!==!1&&"immutable"!==t)throw new Error('Set mutable either "mutable" or "immutable"!');o.prototype.mutable_default=!1}return"OK"},o.prototype.val=function(t,r,n){var u,i,l,c,s;if("object"==typeof t){for(l in t)i=t[l],this.val(l,i,r);return this}if(null!=t&&null!=r){if(n=null!=n?n===!0||"mutable"===n?!0:!1:this.mutable_default,"function"==typeof r)return this;if(n&&"number"!=typeof r||r.constructor===Object){if("string"==typeof r)return s=e.addOperation(new a.Word(void 0)).execute(),s.insertText(0,r),o.__super__.val.call(this,t,s);if(r.constructor===Object)return u=e.addOperation(new o(void 0,r,n)).execute(),o.__super__.val.call(this,t,u);throw new Error("You must not set "+typeof r+"-types in collaborative Json-objects!")}return c=e.addOperation(new a.ImmutableObject(void 0,r)).execute(),o.__super__.val.call(this,t,c)}return o.__super__.val.call(this,t,r)},Object.defineProperty(o.prototype,"value",{get:function(){return n(this)},set:function(t){var e,r,o;if(t.constructor==={}.constructor){o=[];for(e in t)r=t[e],o.push(this.val(e,r,"immutable"));return o}throw new Error("You must only set Object values!")}}),o.prototype._encode=function(){return{type:"JsonType",uid:this.getUid()}},o}(a.MapManager),u.JsonType=function(t){var e;return e=t.uid,new o(e)},a.JsonType=o,i}}).call(this);
//# sourceMappingURL=../Types/JsonTypes.js.map